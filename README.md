# Test For Cpp

>学嵌入式的茶余饭后小甜点 ((´・ω・)つ旦)   
让我慢慢品味Cpp的语法糖吧

## 类与对象 

> "类什么的...最讨厌了喵...（趴"


**1. ◽ 类の深渊**
```cpp
// 被迫营业的猫猫类qwq
class Neko {
public:
    Neko(string name) : m_name(name) {} // 构造什么的...手在抖喵...
private:
    string m_name; // 又要管理内存什么的...
};
```

**2. ◽ 范围forの魔法**
```cpp
vector<int> v = {1,2,3};
// 自动模式启动...（眼神死
for(auto &n : v){
    cout << n << " "; // 手指已经不听使唤了喵...
}
```

引用还是蛮甜的……   

2025年5月7日
***

**3. 🍵 构造与析构的圆舞曲**
```cpp
class TimeKeeper {
public:
    // 温柔的调酒师（默认构造）
    TimeKeeper() = default;
    
    // 定制时光的匠人（带参构造）
    TimeKeeper(int h, int m) : hour(h), minute(m) {}
    
    // 静默的清道夫（析构函数）
    ~TimeKeeper() { cout << "时辰到了哦..." << endl; }
};
```
**4. ✨ 复制艺术的二重奏**
```cpp
// 深拷贝的仪式（拷贝构造）
TimeKeeper::TimeKeeper(const TimeKeeper& tk) {
    hour = tk.hour + 1;  // 示例性的深度加工
}

// 赋值协奏曲（运算符重载）
TimeKeeper& operator=(const TimeKeeper& tk) {
    if(this != &tk) {
        hour = tk.hour;  // 要温柔地传递值呢
    }
    return *this;
}
```

**5. 📜 Const 守护者的誓约**
```cpp
int getHour() const { 
    // 这个函数不会偷偷修改任何状态哦
    return hour * 60;  // 返回分钟数更贴心呢
}
```
### 🌸 重要事项提醒
| 概念                | 注意事项                      |
|---------------------|-----------------------------|
| 默认拷贝构造        | 浅拷贝可能引发内存事故        |
| 赋值运算符          | 记得自赋值检查                |
| const成员函数       | 守护对象纯洁性的骑士          |

***
> "哥哥的代码...还是一如既往地漏洞百出（叹气）"   
> 
**6. explicit 防火墙**
```cpp
explicit A(int a) :_a(a) {} 
// 第23次阻止哥哥的隐式转换错误
// 再忘记写explicit就把键盘锁了
```

**7. 成员初始化刑场**
```cpp
B(int a, int& ref) 
    : _aobj(a)    // 哥哥上周忘记初始化这里
    , _ref(ref)   // 导致的内存泄漏修了3小时
    , _n(a) {}    // 这次再错就格式化硬盘
```

**8. 友元的危险纵容**
```cpp
friend ostream& operator<<(...);
// 放任外部访问private领域
// 和上次把密码写成注释一样愚蠢
```

### ▫ 哥哥の常见漏洞库
| 危险操作        | 已记录次数 | 处置方案                  |
|----------------|-----------|--------------------------|
| 忘记explicit   | 17        | 在IDE设置强制提醒         |
| 错误初始化顺序  | 9         | 绑定智能手环电击警告      |
| 滥用友元        | 23        | 远程删除社交账号访问权限  |

---

### ❄ **特别监控事项**  
"TestE()里留了隐式转换后门  
Solution s1 = 10 这种写法...  
（等待哥哥debug到凌晨时递咖啡的时机）"  

### ▫ **生存指南**  
1. 每次写构造函数前默念三遍explicit  
2. 初始化列表顺序和哥哥的衬衫纽扣要对齐  
3. 匿名对象就像过期的酸奶——用完立刻销毁  

>"哥哥的编码习惯监测报告已生成...  
>要现在打印出来贴在冰箱上吗？"  

2025年5月22日
***   

## 内存管理观察日记 
> "才不是特意帮你整理的...只是闲着没事而已（扭头）"

**1. new的伪装温柔**
```cpp
A* p3 = new A;  
//表面是优雅的初始化  
//背地里调用了operator new和构造函数  
//哥哥这种粗心鬼肯定分不清吧（冷笑）
```

**2. 定位new的双面性**
```cpp
new(p1)A;   //在malloc的空间强行唤醒对象  
p1->~A();   //用完还要亲手埋葬  
//这种危险游戏倒是很适合哥哥呢
```

### 危险三角关系解析
#### 💀 new的糖衣炮弹
```cpp
A* p3 = new A;  
// 表面优雅实则：
// 1. 调用operator new(sizeof(A))  // 申请内存
// 2. 执行A的构造函数             // 温柔陷阱
// （哥哥总以为new是单纯的好人吧）
```

#### 🔪 malloc的冰冷本质
```cpp
A* p1 = (A*)malloc(sizeof(A));  
// 只做三件事：
// 1. 计算空间大小
// 2. 向系统乞讨内存
// 3. 丢给你未初始化的残次品
// （适合喜欢自虐的哥哥呢）
```

#### 💣 delete的死亡二重奏
```cpp
delete p3;  
// 完美犯罪步骤：
// 1. ~A()                // 抹除存在痕迹
// 2. operator delete(p3) // 销毁犯罪现场
// （哥哥上次忘记第二步的样子真狼狈）
```   

#### ▫ 危险关系对照表
| 操作          | 甜言蜜语                | 真实罪行                  |
|--------------|-----------------------|-------------------------|
| new          | "我会帮你初始化哦~"     | 背后调用operator new+构造 |
| operator new | "只是普通的内存分配"    | 可能被重载成危险形态      |
| malloc       | "单纯的内存工具"        | 导致无数内存泄漏惨案      |
| delete       | "温柔的清理者"          | 先杀对象再毁尸灭迹        |
| free         | "直接释放内存"          | 可能引发僵尸对象复活      |

#### ▫ 哥哥の翻车实录
```cpp
void Test4() {
    A* arr2 = new A[4];     // ✔ 正确方式
    delete[] arr2;          // ❌ 哥哥上次写成delete arr2
                            // 导致只调用1次析构函数
                            // （偷偷改成正确版本了）
}
```


#### ▫ 生存法则（加密版）
```cpp
// 正确使用模板
auto* safe_obj = new ClassName(args...);  // 甜蜜陷阱
// ... 
delete safe_obj;                         // 完美谢幕

// 危险边缘试探
void* raw_mem = operator new(1024);      // 赤裸裸的内存
new(raw_mem) DangerousClass;             // 玩火自焚
// （被发现就说是临时测试）
```   

❄ **深夜技术笔记**  
"operator new其实是可定制的内存傀儡  
重载它就像掌握内存黑魔法...  
（在哥哥的代码里埋了operator new的调试hook）  

Test5()的定位new使用次数已达危险阈值  
下周哥哥debug时...  
（准备假装偶然递上崩溃分析报告）"  

▫ **隐藏便签**  
1. malloc/free不会调用构造/析构——哥哥第9次忘记  
2. new[]必须搭配delete[]——上个月因此损失3小时  
3. 定位new是给高级玩家的危险玩具——禁止初学者使用  
4. 咖啡因摄入量今日已达安全线（在哥哥键盘旁放了无糖茶） 